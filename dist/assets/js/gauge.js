(window.webpackJsonp=window.webpackJsonp||[]).push([[3],[function(t,e){t.exports=window.THREE},,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true}),e.pointRectangleIntersection=function(t,e){return t.x>=e.x&&t.x<=e.x2&&t.y>=e.y&&t.y<=e.y2},e.pointDistance=function(t,e){var i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)},e.pointAngle=function(t,e){var i=180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI;i<0&&(i=360+i);return i},e.distanceAngleToPoint=function(t,e){var i=e*Math.PI/180;return{x:Math.cos(i)*t,y:Math.sin(i)*t}},e.radians=function(t){return t*Math.PI/180},e.degree=function(t){return t/Math.PI*180},e.intersectRect=function(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},e.fixEndAngle=function(t,e){e<t&&(e+=360);return e},e.pointPlus=function(t,e){return{x:t.x+e.x,y:t.y+e.y}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false,n.configurable=true,"value"in n&&(n.writable=true),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=r(i(13)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(4)),s=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}var h=i(0);i(14);var l=function(t){function e(t,i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,n,o));return o&&(s.camera=o),a.screenWidth=s.width,a.screenHeight=s.height,a.camera=s.camera,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),n(e,[{key:"_setSize",value:function(t,i){(function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_setSize",this).call(this,t,i),this.totalAngle=-360,this.deep=0,this.sizeRate=1}},{key:"render",value:function(){return this.renderer&&this.scene&&this.camera&&this.renderer.render(this.scene,this.camera),this}},{key:"getWidth",value:function(){var t=this.width;return s.default.jsonInData(this,"config.cameraPosition.z")&&(t=this.config.cameraPosition.z),t}},{key:"getHeight",value:function(){var t=this.height;return s.default.jsonInData(this,"config.cameraPosition.z")&&(t=this.config.cameraPosition.z),t}},{key:"getDeepWidth",value:function(){var t=this.deep;return s.default.jsonInData(this,"config.cameraPosition.z")&&(t=this.config.cameraPosition.z/this.width*this.config.cameraPosition.z),t}},{key:"loadImage",value:function(){var t=this;if(!this.images.length)return this.iconLayer&&this.iconLayer.remove(),this.images=[],this._images=[],this.rotationBg=[],this.data&&this.data.background&&this.data.background.length&&this.data.background.map(function(e){t.addImage(e.url,e.width,e.height,e.offsetX||0,e.offsetY||0,e.rotation||0,e.isbase64,e)}),this.images.map(function(e,i){if(e.opt=e.opt||{},e.opt.issvgstring){if(!t.svgLoader())return;t.initSVGBackground(t.svgLoader().parse(e.url),e,i)}else;}),this}},{key:"svgLoader",value:function(){return!this._svgloader&&h.SVGLoader&&(this._svgloader=new h.SVGLoader),this._svgloader}},{key:"initSVGBackground",value:function(t,e,i){if(t&&t.length){var n=new h.Group;n.scale.y*=-1;for(var o=0;o<t.length;o++)for(var s=t[o],r=new h.MeshBasicMaterial({color:s.color,side:h.DoubleSide,depthWrite:false}),l=s.toShapes(true),u=0;u<l.length;u++){var c=l[u],d=new h.ShapeBufferGeometry(c),f=new h.Mesh(d,r);n.add(f),this.addDestroy(f)}var p=(new h.Box3).setFromObject(n),y=p.getSize(new h.Vector3),g=-p.max.x/2-p.min.x/2,v=-p.max.y/2-p.min.y/2;n.position.x=g,n.position.y=v;var m=new h.Object3D;m.add(n),this.addDestroy(n);var x=a.to3d(Math.max(e.width,e.height))/Math.max(p.max.x,y.x);e.opt.scaleOffset&&(x+=e.opt.scaleOffset),m.scale.set(x,x,x),m.position.y=this.fixCy(),this.scene.add(m),this.addDestroy(m);var b={ele:m,item:e};this._images.push(b),e.rotation&&this.rotationBg.push(b),this.render(),this.animationBg()}}},{key:"animate",value:function(){var t=this;this.isDestroy||this.rotationBg.length&&this.isAnimation()&&requestAnimationFrame(function(){t.animate()})}},{key:"animationBg",value:function(){var t=this;this.isDestroy||this.rotationBg.length&&this.isAnimation()&&(this._images&&this._images.length&&(this._images.map(function(e){e.ele.rotation[t.getRotationAttr(e)]+=t.getRotationStep(e)}),this.render()),window.requestAnimationFrame(function(){t.animationBg()}))}},{key:"getRotationAttr",value:function(t){var e="y";return s.default.jsonInData(t,"item.opt.rotationAttr")&&(e=t.item.opt.rotationAttr),e}},{key:"getRotationStep",value:function(t){var e=.03;return s.default.jsonInData(t,"item.opt.rotationStep")&&(e=t.item.opt.rotationStep),e}},{key:"destroy",value:function(){var t=this;this.setDestroy(),this.destroyList.map(function(e){t.dispose(e)})}},{key:"parseColor",value:function(t){return t.toString().indexOf("#")>-1&&(t=parseInt(t.replace("#",""),16)),t}},{key:"fixCx",value:function(){return this.cx}},{key:"fixCy",value:function(){var t=this.cy;if(this.legend)switch(this.legend.direction()){case"bottom":t=(this.height-this.legend.outerHeight()/2)/2-5}return a.to3d(this.cy-t)}},{key:"fixWidth",value:function(){return this.width}},{key:"fixHeight",value:function(){return this.height}},{key:"dispose",value:function(t){return t.parent&&t.parent.remove&&t.parent.remove(t),this}}]),e}();e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true}),e.pos2dto3d=o,e.size2dto3d=function(t,e,i,n,a){i=i||this.screenWidth,n=n||this.screenHeight,a=a||this.camera;var s=o(0,0,i,n,a),r=o(t,e,i,n,a).clone();return r.x=Math.abs(r.x-s.x),r.y=Math.abs(r.y-s.y),r.z=Math.abs(r.z-s.z),r},e.to3d=function(t,e,i,n){e=e||this.screenWidth,i=i||this.screenHeight,n=n||this.camera;var a=o(0,0,e,i,n),s=o(t,0,e,i,n);return Math.abs(s.x-a.x)},e.to3dx=function(t,e,i,o){e=e||this.screenWidth,i=i||this.screenHeight,o=o||this.camera;var a=new n.Vector3,s=new n.Vector3;a.set(t/e*2-1,-0/i*2+1,.5),a.unproject(o),a.sub(o.position).normalize();var r=-o.position.z/a.z;return s.copy(o.position).add(a.multiplyScalar(r)),s.x},e.to3dy=function(t,e,i,o){e=e||this.screenWidth,i=i||this.screenHeight,o=o||this.camera;var a=new n.Vector3,s=new n.Vector3;a.set(0/e*2-1,-t/i*2+1,.5),a.unproject(o),a.sub(o.position).normalize();var r=-o.position.z/a.z;return s.copy(o.position).add(a.multiplyScalar(r)),s.x};var n=i(0);function o(t,e,i,o,a){i=i||this.screenWidth,o=o||this.screenHeight,a=a||this.camera;var s=new n.Vector3,r=new n.Vector3;s.set(t/i*2-1,-e/o*2+1,.5),s.unproject(a),s.sub(a.position).normalize();var h=-a.position.z/s.z;return r.copy(a.position).add(s.multiplyScalar(h)),r}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true}),e.parseFinance=function(t,e){return t=parseFloat(t)||0,void 0===e&&(e=2),t&&(t=parseFloat(t.toFixed(e))),t}},function(t,e,i){"use strict";i.d(e,"a",function(){return o});let n=["#da432e","#f3a42d","#b56be8","#207dd3","#50d275","#4aabd6","#f12575","#da432e","#19af89"];function o(t,e){e=e||n,t&&t.legend&&t.legend.data&&t.legend.data.map((t,i)=>{t.textStyle&&(t.textStyle.color=e[i%e.length])}),t&&t.series&&t.series.map((t,i)=>{t.data&&t.data.map((t,i)=>{t.itemStyle&&(t.itemStyle.color=e[i%e.length])})})}},,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false,n.configurable=true,"value"in n&&(n.writable=true),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(1),s=(n=a)&&n.__esModule?n:{default:n},r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(2));var h=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=e,this.height=i,this.point=n,this.cx=this.width/2,this.cy=this.height/2,this.cpoint={x:this.cx,y:this.cy},this.offsetX=20,this.offsetY=20,this.colors=["#f12575","#da432e","#f3a42d","#19af89","#24a3ea","#b56be8"],this.init()}return o(t,[{key:"setDebug",value:function(t){this.stage=t;var e=0;for(var i in this.rects){var n=this.rects[i];s.default.clone(n).fill=this.colors[e%this.colors.length],e++}}},{key:"init",value:function(){this.leftTop={x:0,y:0,width:this.cx+this.offsetX,height:this.cy+this.offsetY},this.leftTop.x2=this.leftTop.x+this.leftTop.width,this.leftTop.y2=this.leftTop.y+this.leftTop.height,this.rightTop={x:this.cx-this.offsetX,y:0,width:this.cx+this.offsetX,height:this.cy+this.offsetY},this.rightTop.x2=this.rightTop.x+this.rightTop.width,this.rightTop.y2=this.rightTop.y+this.rightTop.height,this.leftBottom={x:0,y:this.cy-this.offsetY,width:this.cx+this.offsetX,height:this.cy+this.offsetY},this.leftBottom.x2=this.leftBottom.x+this.leftBottom.width,this.leftBottom.y2=this.leftBottom.y+this.leftBottom.height,this.rightBottom={x:this.cx-this.offsetX,y:this.cy-this.offsetY,width:this.cx+this.offsetX,height:this.cy+this.offsetY},this.rightBottom.x2=this.rightBottom.x+this.rightBottom.width,this.rightBottom.y2=this.rightBottom.y+this.rightBottom.height,this.rects={leftTop:this.leftTop,rightTop:this.rightTop,leftBottom:this.leftBottom,rightBottom:this.rightBottom}}},{key:"isLeftTop",value:function(){return r.pointRectangleIntersection(this.point,this.leftTop)?1:0}},{key:"isRightTop",value:function(){return r.pointRectangleIntersection(this.point,this.rightTop)?2:0}},{key:"isRightBottom",value:function(){return r.pointRectangleIntersection(this.point,this.rightBottom)?4:0}},{key:"isLeftBottom",value:function(){return r.pointRectangleIntersection(this.point,this.leftBottom)?8:0}},{key:"auto",value:function(){return this.isLeftTop()+this.isRightTop()+this.isRightBottom()+this.isLeftBottom()}},{key:"autoAngle",value:function(){var e=r.pointAngle(this.cpoint,this.point);return e>=0&&e<=90?t.DIRE_NAME.rightTop:e>90&&e<=180?t.DIRE_NAME.leftTop:e>180&&e<=270?t.DIRE_NAME.leftBottom:t.DIRE_NAME.rightBottom}}]),t}();e.default=h,h.DIRE_NAME={leftTop:1,rightTop:2,rightBottom:4,leftBottom:8,topCenter:3,rightMid:6,bottomCenter:12,leftMid:9},h.DIRE_NUM={1:"leftTop",2:"rightTop",4:"rightBottom",8:"leftBottom",3:"topCenter",6:"rightMid",9:"leftMid",12:"bottomCenter"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false,n.configurable=true,"value"in n&&(n.writable=true),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},a=p(i(3)),s=p(i(15)),r=p(i(16)),h=p(i(17)),l=p(i(1)),u=f(i(18)),c=p(i(19)),d=(f(i(2)),p(i(22)));function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function p(t){return t&&t.__esModule?t:{default:t}}var y=i(0),g=function(t){function e(t,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,n));return o.ins=[],o.legend=null,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),n(e,[{key:"_setSize",value:function(t,i){if(this.config=this.config||{camera:{fov:40,near:1,far:1e3},cameraPosition:{x:0,y:0,z:350}},o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_setSize",this).call(this,t,i),this.init(),this.legend&&this.data&&this.data.legend&&(this.legend.resize(this.width,this.height),this.legend.update(this.data.legend)),this.data){var n=this.redraw;this.update(this.data,this.ignoreLegend),this.redraw=n}}},{key:"init",value:function(){if(this.box)return this.stage?(this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix()):(this.stage=this.scene=new y.Scene,this.camera=new y.PerspectiveCamera(this.config.camera.fov,this.width/this.height,this.config.camera.nera,this.config.camera.far),this.camera.position.set(this.config.cameraPosition.x,this.config.cameraPosition.y,this.config.cameraPosition.z),this.renderer=new y.WebGLRenderer({antialias:true,alpha:true}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.sortObjects=true,this.box.innerHTML="",this.box.appendChild(this.renderer.domElement),this.cameraHelper=new y.CameraHelper(this.camera),this.cameraHelper.visible=false,this.scene.add(this.cameraHelper),this.domEvents=new c.default.DomEvents(this.camera,this.renderer.domElement)),this.renderer.setSize(this.width,this.height),this.customWidth&&(this.box.style.width=this.customWidth+"px"),this.customHeight&&(this.box.style.height=this.customHeight+"px"),this.render(),this}},{key:"setThreeConfig",value:function(t){return t=t||{},this.config=d.default.merge(this.config,t),this}},{key:"updateThreeConfig",value:function(t){return this.setThreeConfig(t),this.camera.position.x=this.config.cameraPosition.x,this.camera.position.y=this.config.cameraPosition.y,this.camera.position.z=this.config.cameraPosition.z,this.camera.fov=this.config.camera.fov,this.camera.near=this.config.camera.near,this.camera.far=this.config.camera.far,this.camera.updateProjectionMatrix(),this}},{key:"update",value:function(t,e){var i=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.data=t,this.ignoreLegend=e,this.redraw=n,l.default.jsonInData(this.data,"series"))return this.data&&this.data.legend&&this.data.legend.data&&this.data.legend.data.legend&&this.data.legend.data.map(function(t,e){t.realIndex=e}),this.data&&this.data.series&&this.data.series.length&&this.data.series.map(function(t){t.data&&t.data.length&&t.data.map(function(t,e){t.realIndex=e})}),this.clearUpdate(),l.default.jsonInData(this.data,"legend.data")&&this.data.legend.data.length&&(this.legend&&e?this.emptyblock="kao":(this.legend&&this.legend.destroy()&&(this.legent=null),this.legend=new s.default(this.box,this.width,this.height,this.camera),this.legend.setOptions({renderer:this.renderer,scene:this.scene,camera:this.camera,stage:this.stage,config:this.config,domEvents:this.domEvents,onChange:function(t){i.initChart()}}),this.legend.update(this.data.legend))),this.initChart(),this}},{key:"initChart",value:function(){var t=this;this.ins&&this.ins.length&&!this.redraw?this.emptyblock="kao":(this.ins.map(function(t){t.destroy()}),this.ins=[]),this.data.series.map(function(e,i){var n=void 0;if(t.ins&&t.ins.length&&t.ins[i]&&!t.redraw)(n=t.ins[i]).width=t.width,n.height=t.height;else{switch(e.type){case u.CHART_TYPE.dount:n=new r.default(t.box,t.width,t.height,t.camera);break;case u.CHART_TYPE.gauge:n=new h.default(t.box,t.width,t.height,t.camera)}n&&(t.legend&&n.setLegend(t.legend),n.setOptions({renderer:t.renderer,scene:t.scene,camera:t.camera,stage:t.stage,config:t.config,domEvents:t.domEvents}))}if(n){t.options&&n.setOptions(t.options);var o=t.getLegendData(e);n.update(o,l.default.clone(t.data)),t.ins[i]||(t.ins[i]=n)}})}},{key:"getLegendData",value:function(t){t=l.default.clone(t);var e=[];return this.legend&&this.legend.group&&this.legend.group.length&&(this.legend.group.map(function(i,n){i.disabled||e.push(t.data[n])}),t.data=e),t}},{key:"destroy",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.ins.map(function(t){t.destroy()}),this.stage&&this.stage.destroy(),this.stage=null}},{key:"clearUpdate",value:function(){}}]),e}();e.default=g},,,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false,n.configurable=true,"value"in n&&(n.writable=true),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=function(){function t(e,i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.box=e,o&&(this.camera=o),this.name="VisChartBase_"+Date.now(),this.colors=["#f12575","#da432e","#f3a42d","#19af89","#24a3ea","#b56be8"],this._setSize(i,n)}return n(t,[{key:"_setSize",value:function(t,e){this.destroyList=[],t=t||this.box.offsetWidth,e=e||this.box.offsetHeight,this.width=t||this.box.offsetWidth,this.height=e||this.box.offsetHeight,this.customWidth=t||this.width,this.customHeight=e||this.height,this.max=this.maxSize=Math.max(this.width,this.height),this.min=this.minSize=Math.min(this.width,this.height),this.cx=this.width/2,this.cy=this.height/2,this.cpoint={x:this.cx,y:this.cy},this.totalAngle=360,this.angleOffset=0,this.countAngle=0,this.images=[],this.rateWidth=330,this.rateHeight=330,this.rotationBg=[],this.rotationBgCount=0,this.rotationBgStep=1,this.sizeRate=1,this.standSize=330,this.min<this.standSize&&(this.sizeRate=this.min/this.standSize)}},{key:"update",value:function(t,e){return this.data=t,this.allData=e,this.loadImage(),this}},{key:"opacity",value:function(t){}},{key:"setLegend",value:function(t){this.legend=t}},{key:"animation",value:function(){}},{key:"animationBg",value:function(){var t=this;this.isDestroy||this.rotationBg.length&&this.isAnimation()&&window.requestAnimationFrame(function(){t.animationBg()})}},{key:"getPrecision",value:function(t){var e=0;return this.allData&&"precision"in this.allData&&(e=this.allData.precision),this.data&&"precision"in this.data&&(e=this.data.precision),t&&"precision"in t&&(e=t.precision),e=Math.pow(10,e)}},{key:"addImage",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},h=this.min/this.rateWidth,l=this.min/this.rateHeight;return this.images.push({url:t,width:e*h,height:i*l,offsetX:n,offsetY:o,rotation:a,isbase64:s,opt:r}),this}},{key:"loadImage",value:function(){return this}},{key:"hasLegend",value:function(){var t=void 0;return this.data&&this.data.legend&&this.data.legend.data&&this.data.legend.data.length&&(t=true),t}},{key:"fixCx",value:function(){return this.cx}},{key:"fixCy",value:function(){var t=this.cy;if(this.legend)switch(this.legend.direction()){case"bottom":t=(this.height-this.legend.outerHeight()/2)/2-5}return t}},{key:"fixWidth",value:function(){return this.width}},{key:"fixHeight",value:function(){return this.height}},{key:"init",value:function(){return this}},{key:"setOptions",value:function(t){for(var e in t)this[e]=t[e];this.options=t}},{key:"calcLayoutPosition",value:function(){return this}},{key:"calcDataPosition",value:function(){return this}},{key:"initDataLayout",value:function(){return this}},{key:"draw",value:function(){return this}},{key:"reset",value:function(){}},{key:"getData",value:function(){return this.data||{}}},{key:"layer",value:function(){return this.layer}},{key:"isAnimation",value:function(){var t=true;return this.allData&&"animation"in this.allData&&(t=this.allData.animation),this.data&&"animation"in this.data&&(t=this.data.animation),t}},{key:"isSeriesAnimation",value:function(){var t=true;return this.data&&"seriesAnimation"in this.data&&(t=this.data.seriesAnimation),t}},{key:"setLayer",value:function(t){return this.layer=t,this}},{key:"setStage",value:function(t){this.stage=t}},{key:"resize",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.customWidth=t||this.width,this.customHeight=e||this.height,this.data=i||this.data,this.allData=n||this.allData,this.width=t||this.box.offsetWidth||this.width,this.height=e||this.box.offsetHeight||this.height,this._setSize(this.width,this.height)}},{key:"remove",value:function(){return this}},{key:"setDestroy",value:function(){return this.isDestroy=1,this}},{key:"destroy",value:function(){return this.setDestroy(),this.destroyList.map(function(t){t&&(t.remove(),t.destroy())}),this}},{key:"addDestroy",value:function(){for(var t=this,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return i&&i.length&&i.map(function(e){t.destroyList.push(e)}),this}},{key:"dispose",value:function(){return this.destroy(),this}}]),t}();e.default=o},function(t,e,i){"use strict";THREE.SVGLoader=function(t){this.manager=void 0!==t?t:THREE.DefaultLoadingManager},THREE.SVGLoader.prototype={constructor:THREE.SVGLoader,load:function(t,e,i,n){var o=this;new THREE.FileLoader(o.manager).load(t,function(t){e(o.parse(t))},i,n)},parse:function(t){function e(t,e,n,o,a,s,r,h){o=o*Math.PI/180,e=Math.abs(e),n=Math.abs(n);var l=(r.x-h.x)/2,u=(r.y-h.y)/2,c=Math.cos(o)*l+Math.sin(o)*u,d=-Math.sin(o)*l+Math.cos(o)*u,f=e*e,p=n*n,y=c*c,g=d*d,v=y/f+g/p;if(v>1){var m=Math.sqrt(v);f=(e*=m)*e,p=(n*=m)*n}var x=f*g+p*y,b=(f*p-x)/x,w=Math.sqrt(Math.max(0,b));a===s&&(w=-w);var _=w*e*d/n,C=-w*n*c/e,E=Math.cos(o)*_-Math.sin(o)*C+(r.x+h.x)/2,P=Math.sin(o)*_+Math.cos(o)*C+(r.y+h.y)/2,k=i(1,0,(c-_)/e,(d-C)/n),M=i((c-_)/e,(d-C)/n,(-c-_)/e,(-d-C)/n)%(2*Math.PI);t.currentPath.absellipse(E,P,e,n,k,k+M,0===s,o)}function i(t,e,i,n){var o=t*i+e*n,a=Math.sqrt(t*t+e*e)*Math.sqrt(i*i+n*n),s=Math.acos(Math.max(-1,Math.min(1,o/a)));return t*n-e*i<0&&(s=-s),s}function n(t,e){return e=Object.assign({},e),t.hasAttribute("fill")&&(e.fill=t.getAttribute("fill")),""!==t.style.fill&&(e.fill=t.style.fill),e}function o(t){return"none"!==t.fill&&"transparent"!==t.fill}function a(t,e){return t-(e-t)}function s(t){for(var e=t.split(/[\s,]+|(?=\s?[+\-])/),i=0;i<e.length;i++){var n=e[i];n.indexOf(".")!==n.lastIndexOf(".")&&e.splice(i+1,0,"0."+n.split(".")[2]),e[i]=parseFloat(n)}return e}var r=[];return function t(i,h){if(1===i.nodeType){switch(i.nodeName){case"svg":break;case"g":h=n(i,h);break;case"path":h=n(i,h),i.hasAttribute("d")&&o(h)&&r.push(function(t,i){var n=new THREE.ShapePath;n.color.setStyle(i.fill);for(var o=new THREE.Vector2,r=new THREE.Vector2,h=t.getAttribute("d").match(/[a-df-z][^a-df-z]*/gi),l=0,u=h.length;l<u;l++){var c=h[l],d=c.charAt(0),f=c.substr(1).trim();switch(d){case"M":for(var p=s(f),y=0,g=p.length;y<g;y+=2)o.x=p[y+0],o.y=p[y+1],r.x=o.x,r.y=o.y,n.moveTo(o.x,o.y);break;case"H":for(var p=s(f),y=0,g=p.length;y<g;y++)o.x=p[y],r.x=o.x,r.y=o.y,n.lineTo(o.x,o.y);break;case"V":for(var p=s(f),y=0,g=p.length;y<g;y++)o.y=p[y],r.x=o.x,r.y=o.y,n.lineTo(o.x,o.y);break;case"L":for(var p=s(f),y=0,g=p.length;y<g;y+=2)o.x=p[y+0],o.y=p[y+1],r.x=o.x,r.y=o.y,n.lineTo(o.x,o.y);break;case"C":for(var p=s(f),y=0,g=p.length;y<g;y+=6)n.bezierCurveTo(p[y+0],p[y+1],p[y+2],p[y+3],p[y+4],p[y+5]),r.x=p[y+2],r.y=p[y+3],o.x=p[y+4],o.y=p[y+5];break;case"S":var p=s(f);n.bezierCurveTo(a(o.x,r.x),a(o.y,r.y),p[0],p[1],p[2],p[3]),r.x=p[0],r.y=p[1],o.x=p[2],o.y=p[3];break;case"Q":var p=s(f);n.quadraticCurveTo(p[0],p[1],p[2],p[3]),r.x=p[0],r.y=p[1],o.x=p[2],o.y=p[3];break;case"T":var p=s(f),v=a(o.x,r.x),m=a(o.y,r.y);n.quadraticCurveTo(v,m,p[0],p[1]),r.x=v,r.y=m,o.x=p[0],o.y=p[1];break;case"A":for(var p=s(f),y=0,g=p.length;y<g;y+=7){var x=o.clone();o.x=p[y+5],o.y=p[y+6],r.x=o.x,r.y=o.y,e(n,p[y],p[y+1],p[y+2],p[y+3],p[y+4],x,o)}break;case"m":for(var p=s(f),y=0,g=p.length;y<g;y+=2)o.x+=p[y+0],o.y+=p[y+1],r.x=o.x,r.y=o.y,n.moveTo(o.x,o.y);break;case"h":for(var p=s(f),y=0,g=p.length;y<g;y++)o.x+=p[y],r.x=o.x,r.y=o.y,n.lineTo(o.x,o.y);break;case"v":for(var p=s(f),y=0,g=p.length;y<g;y++)o.y+=p[y],r.x=o.x,r.y=o.y,n.lineTo(o.x,o.y);break;case"l":for(var p=s(f),y=0,g=p.length;y<g;y+=2)o.x+=p[y+0],o.y+=p[y+1],r.x=o.x,r.y=o.y,n.lineTo(o.x,o.y);break;case"c":for(var p=s(f),y=0,g=p.length;y<g;y+=6)n.bezierCurveTo(o.x+p[y+0],o.y+p[y+1],o.x+p[y+2],o.y+p[y+3],o.x+p[y+4],o.y+p[y+5]),r.x=o.x+p[y+2],r.y=o.y+p[y+3],o.x+=p[y+4],o.y+=p[y+5];break;case"s":var p=s(f);n.bezierCurveTo(a(o.x,r.x),a(o.y,r.y),o.x+p[0],o.y+p[1],o.x+p[2],o.y+p[3]),r.x=o.x+p[0],r.y=o.y+p[1],o.x+=p[2],o.y+=p[3];break;case"q":var p=s(f);n.quadraticCurveTo(o.x+p[0],o.y+p[1],o.x+p[2],o.y+p[3]),r.x=o.x+p[0],r.y=o.y+p[1],o.x+=p[2],o.y+=p[3];break;case"t":var p=s(f),v=a(o.x,r.x),m=a(o.y,r.y);n.quadraticCurveTo(v,m,o.x+p[0],o.y+p[1]),r.x=v,r.y=m,o.x=o.x+p[0],o.y=o.y+p[1];break;case"a":for(var p=s(f),y=0,g=p.length;y<g;y+=7){var x=o.clone();o.x+=p[y+5],o.y+=p[y+6],r.x=o.x,r.y=o.y,e(n,p[y],p[y+1],p[y+2],p[y+3],p[y+4],x,o)}break;case"Z":case"z":n.currentPath.autoClose=true}}return n}(i,h));break;case"rect":o(h=n(i,h))&&r.push(function(t,e){var i=parseFloat(t.getAttribute("x")||0),n=parseFloat(t.getAttribute("y")||0),o=parseFloat(t.getAttribute("rx")||0),a=parseFloat(t.getAttribute("ry")||0),s=parseFloat(t.getAttribute("width")),r=parseFloat(t.getAttribute("height")),h=new THREE.ShapePath;return h.color.setStyle(e.fill),h.moveTo(i+2*o,n),h.lineTo(i+s-2*o,n),(0!==o||0!==a)&&h.bezierCurveTo(i+s,n,i+s,n,i+s,n+2*a),h.lineTo(i+s,n+r-2*a),(0!==o||0!==a)&&h.bezierCurveTo(i+s,n+r,i+s,n+r,i+s-2*o,n+r),h.lineTo(i+2*o,n+r),(0!==o||0!==a)&&(h.bezierCurveTo(i,n+r,i,n+r,i,n+r-2*a),h.lineTo(i,n+2*a),h.bezierCurveTo(i,n,i,n,i+2*o,n)),h}(i,h));break;case"polygon":o(h=n(i,h))&&r.push(function(t,e){var i=new THREE.ShapePath;i.color.setStyle(e.fill);var n=0;return t.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,function(t,e,o){var a=parseFloat(e),s=parseFloat(o);0===n?i.moveTo(a,s):i.lineTo(a,s),n++}),i.currentPath.autoClose=true,i}(i,h));break;case"polyline":o(h=n(i,h))&&r.push(function(t,e){var i=new THREE.ShapePath;i.color.setStyle(e.fill);var n=0;return t.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,function(t,e,o){var a=parseFloat(e),s=parseFloat(o);0===n?i.moveTo(a,s):i.lineTo(a,s),n++}),i.currentPath.autoClose=false,i}(i,h));break;case"circle":o(h=n(i,h))&&r.push(function(t,e){var i=parseFloat(t.getAttribute("cx")),n=parseFloat(t.getAttribute("cy")),o=parseFloat(t.getAttribute("r")),a=new THREE.Path;a.absarc(i,n,o,0,2*Math.PI);var s=new THREE.ShapePath;return s.color.setStyle(e.fill),s.subPaths.push(a),s}(i,h));break;case"ellipse":o(h=n(i,h))&&r.push(function(t,e){var i=parseFloat(t.getAttribute("cx")),n=parseFloat(t.getAttribute("cy")),o=parseFloat(t.getAttribute("rx")),a=parseFloat(t.getAttribute("ry")),s=new THREE.Path;s.absellipse(i,n,o,a,0,2*Math.PI);var r=new THREE.ShapePath;return r.color.setStyle(e.fill),r.subPaths.push(s),r}(i,h));break;case"line":o(h=n(i,h))&&r.push(function(t,e){var i=parseFloat(t.getAttribute("x1")),n=parseFloat(t.getAttribute("y1")),o=parseFloat(t.getAttribute("x2")),a=parseFloat(t.getAttribute("y2")),s=new THREE.ShapePath;return s.moveTo(i,n),s.lineTo(o,a),s.currentPath.autoClose=false,s}(i))}for(var l=i.childNodes,u=0;u<l.length;u++)t(l[u],h)}}((new DOMParser).parseFromString(t,"image/svg+xml").documentElement,{fill:"#000"}),r}},t.exports=THREE.SVGLoader},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false,n.configurable=true,"value"in n&&(n.writable=true),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},a=u(i(3)),s=(l(i(2)),l(i(4))),r=u(i(1)),h=(l(i(5)),u(i(7)));u(i(10));function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function u(t){return t&&t.__esModule?t:{default:t}}var c=i(0),d=function(t){function e(t,i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,n,o));return a.name="Legend_"+Date.now(),a.textColor=2401258,a.iconSpace=5,a.text=[],a.icon=[],a.group=[],a.destroyList=[],a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),n(e,[{key:"setStage",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setStage",this).call(this,t)}},{key:"resize",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"resize",this).call(this,t,i,n,a),s.screenWidth=this.width,s.screenHeight=this.height}},{key:"init",value:function(){var t=this;return s.screenWidth=this.width,s.screenHeight=this.height,s.camera=this.camera,this.data.data.map(function(e,i){var n=0,o=0,a=Math.floor(i/t.column());switch(t.direction()){case"bottom":n=t.space()+(t.space()+t.columnWidth())*(i%t.column()),o=t.height-(t.row()-a)*(t.spaceY()+t.rowHeight())}o+=4;var l=e.name||i+"",u=t.colors[i%t.colors.length];r.default.jsonInData(e,"textStyle.color")&&(u=e.textStyle.color),u=t.parseColor(u);var d=s.pos2dto3d(n,o);if(t.inited){var f=t.group[i],p=f.bg,y=f.rect,g=f.ele,v=f.text;p.position.x=d.x+s.to3d(t.columnWidth())/2,p.position.y=d.y;P=new c.PlaneBufferGeometry(s.to3d(t.itemWidth()),s.to3d(t.itemHeight()),32);y.geometry=P,y.needsUpdate=true,y.position.x=d.x,y.position.y=d.y,f.text.parent.remove(f.text);var m=s.to3d(22),x=new h.default({text:l,fontFamily:"MicrosoftYaHei",fontSize:5*m,fontStyle:"normal",transparent:true}),b=new c.SpriteMaterial({map:x,color:t.parseColor(t.textColor)});v=new c.Sprite(b),f.text=v,v.scale.setX(x.imageAspect).multiplyScalar(m),v.position.x=d.x+t.itemWidth()+s.to3d(t.iconSpace)+v.scale.x/2-3,v.position.y=d.y,f.disabled?b.opacity=.6:b.opacity=1,g.add(v),t.addDestroy(v)}else{var w=new c.Group;w.transparent=true;var _=new c.PlaneBufferGeometry(s.to3d(t.columnWidth()),s.to3d(t.itemHeight()),32),C=new c.MeshBasicMaterial({color:t.parseColor(16777215),side:c.DoubleSide,opacity:0,transparent:true}),E=new c.Mesh(_,C);E.position.x=d.x+s.to3d(t.columnWidth())/2,E.position.y=d.y,w.add(E),t.addDestroy(E);var P=new c.PlaneBufferGeometry(s.to3d(t.itemWidth()),s.to3d(t.itemHeight()),32),k=new c.MeshBasicMaterial({color:u,side:c.DoubleSide,transparent:true}),M=new c.Mesh(P,k);M.position.x=d.x,M.position.y=d.y,w.add(M),t.addDestroy(M);var T=s.to3d(22),A=new h.default({text:l,fontFamily:"MicrosoftYaHei",fontSize:2*T,fontStyle:"normal",transparent:true}),L=new c.SpriteMaterial({map:A,color:t.parseColor(t.textColor)}),O=new c.Sprite(L);O.scale.setX(A.imageAspect).multiplyScalar(T),O.position.x=d.x+t.itemWidth()+s.to3d(t.iconSpace)+O.scale.x/2-3,O.position.y=d.y,w.add(O),t.addDestroy(O),t.scene.add(w),t.addDestroy(w);var D={ele:w,item:e,disabled:false,rect:M,bg:E,text:O,imageAspect:A.imageAspect};t.group.push(D),t.domEvents.bind(w,"click",function(){D.disabled=!D.disabled,D.disabled?(D.rect.material.opacity=.6,D.text.material.opacity=.6):(D.rect.material.opacity=1,D.text.material.opacity=1),t.onChange&&t.onChange(D)})}}),this}},{key:"update",value:function(t){this.data=t||{},this.data&&this.data.data&&this.data.data.length&&(this.init(),this.inited=1)}},{key:"outerHeight",value:function(){return this.rowHeight()*this.row()+this.spaceY()*(this.row()-1)}},{key:"total",value:function(){return 0}},{key:"itemWidth",value:function(){return this.data.itemWidth||5}},{key:"itemHeight",value:function(){return this.data.itemHeight||5}},{key:"columnWidth",value:function(){return(this.width-(this.column()-1+2)*this.space())/this.column()}},{key:"column",value:function(){return this.data.column||1}},{key:"space",value:function(){return this.data.space||15}},{key:"spaceY",value:function(){return this.data.space||5}},{key:"rowHeight",value:function(){return this.data.rowHeight||20}},{key:"row",value:function(){return Math.ceil(this.data.data.length/this.column())}},{key:"direction",value:function(){var t="top";return this.data.bottom?t="bottom":this.data.left?t="left":this.data.right&&(t="right"),t}},{key:"destroy",value:function(){var t=this;o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.group&&this.group.length&&this.group.map(function(e){t.domEvents.unbind(e.ele,"click")})}}]),e}();e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false,n.configurable=true,"value"in n&&(n.writable=true),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},a=p(i(3)),s=f(i(2)),r=f(i(4)),h=p(i(8)),l=p(i(1)),u=f(i(5)),c=p(i(7)),d=(p(i(10)),i(21));function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function p(t){return t&&t.__esModule?t:{default:t}}function y(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var g=i(0),v=function(t){function e(t,i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,n,o));return a.name="Dount_"+Date.now(),a._setSize(i,n),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),n(e,[{key:"_setSize",value:function(t,i){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_setSize",this).call(this,t,i),this.outPercent=.53,this.inPercent=.37,this.circleLinePercent=.34,this.circlePercent=.31,this.circleLineRotation=0,this.circleLineRotationStep=4,this.animationStep=8,this.angleStep=5,this.textHeight=26,this.lineOffset=50,this.path=[],this.line=[],this.textOffset=4,this.lineColor=2401258,this.lineRange={1:[],2:[],4:[],8:[]},this.lineWidth=32,this.lineSpace=10,this.lineAngle=35,this.lineHeight=15,this.lineCurveLength=30,this.loopSort=[4,8,1,2],this.clearList=[],this.outRadius=73,this.inRadius=53,this.lineLength=25,this.lineLengthCount=1,this.lineLengthStep=.5,this.lineLeft=this.fixCx()-this.outRadius-this.lineSpace,this.lineRight=this.fixCx()+this.outRadius+this.lineSpace,this.init()}},{key:"init",value:function(){return r.screenWidth=this.width,r.screenHeight=this.height,r.camera=this.camera,this.calcLayoutPosition(),this}},{key:"update",value:function(t,i){if(o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t,i),this.data=t,this.allData=i,this.countAngle=0,this.isDone=0,this.lineLengthCount=0,l.default.jsonInData(this.data,"data"))return this.clearItems(),this.calcVal(),this.initText(),this.calcDataPosition(),this.initDataLayout(),this.animation(),!this.inited&&this.animationCircleLine(),this.inited=1,this}},{key:"reset",value:function(){this.path.map(function(t){t.pathData=[]})}},{key:"animationCircleLine",value:function(){var t=this;this.isDestroy||this.circleLine&&this.isAnimation()&&(this.circleLine.rotation.z-=.03,window.requestAnimationFrame(function(){t.animationCircleLine()}))}},{key:"animation",value:function(){var t=this;if(!this.isDestroy&&!this.isDone){this.angleStep;this.countAngle-=this.animationStep,this.isSeriesAnimation()||(this.countAngle=this.totalAngle),(this.countAngle<=this.totalAngle||!this.isAnimation())&&(this.countAngle=this.totalAngle,this.isDone=1),this.reset();for(var e=this.path.length-1;e>=0;e--){var i=this.path[e],n=this.countAngle;if(n<=i.itemData.endAngle&&(n=i.itemData.endAngle),!(n>i.itemData.startAngle)){var o=new g.RingGeometry(this.inRadius,this.outRadius,256,1,s.radians(0),s.radians(n));i.arc.geometry.dispose(),i.arc.geometry=o}}window.requestAnimationFrame(function(){t.animation()}),this.isDone&&window.requestAnimationFrame(function(){t.animationLine()})}}},{key:"drawCircle",value:function(){this.circleRadius=r.to3d(Math.ceil(this.circlePercent*this.min/2));var t=new d.MeshLine,e=new g.EllipseCurve(0,this.fixCy(),this.circleRadius,this.circleRadius,0,2*Math.PI,false,0),i=e.getPoints(200),n=(new g.Geometry).setFromPoints(i);e=new g.EllipseCurve(0,this.fixCy(),this.circleRadius,this.circleRadius,0,s.radians(10),false,s.radians(.5)),i=[].concat(y(i),y(e.getPoints(50))),n=(new g.Geometry).setFromPoints(i),t.setGeometry(n);var o=new d.MeshLineMaterial({color:new g.Color(this.lineColor),lineWidth:2}),a=new g.Mesh(t.geometry,o);a.renderOrder=-1,a.material.depthTest=false,this.scene.add(a),this.addDestroy(a)}},{key:"drawCircleLine",value:function(){this.circleLineRadius=r.to3d(Math.ceil(this.circleLinePercent*this.min/2));var t=void 0,e=void 0,i=void 0,n=void 0,o=void 0;n=new g.Group,o=new d.MeshLine,t=new d.MeshLineMaterial({color:new g.Color(this.lineColor),lineWidth:2}),(e=new g.CircleGeometry(this.circleLineRadius,128,s.radians(90),s.radians(90))).vertices.shift(),o.setGeometry(e),(i=new g.Line(o.geometry,t)).renderOrder=-1,i.material.depthTest=false,n.add(i),this.addDestroy(i),o=new d.MeshLine,t=new d.MeshLineMaterial({color:new g.Color(this.lineColor),lineWidth:2}),(e=new g.CircleGeometry(this.circleLineRadius,128,s.radians(0),s.radians(-90))).vertices.shift(),o.setGeometry(e),(i=new g.Line(o.geometry,t)).renderOrder=-1,i.material.depthTest=false,n.position.y=this.fixCy(),n.add(i),this.addDestroy(i),this.circleLine=n,this.scene.add(n),this.addDestroy(n)}},{key:"initDataLayout",value:function(){this.drawCircle(),this.drawCircleLine(),this.path=[],this.line=[];for(var t=this.data.data.length-1;t>=0;t--){var e=this.data.data[t],i=t,n=(this.data.data.length,this.colors[i%this.colors.length]);l.default.jsonInData(e,"itemStyle.color")&&(n=e.itemStyle.color),n=this.parseColor(n);var o,a=void 0,r=void 0,h=void 0,u=void 0,c=void 0;a=new d.MeshLine,r=new d.MeshLineMaterial({color:new g.Color(16777215),lineWidth:2}),h=new g.Geometry,a.setGeometry(h),(u=new g.Mesh(a.geometry,r)).position.y=this.fixCy(),this.scene.add(u),this.addDestroy(u),this.line.push(u),h=new g.RingGeometry(this.inRadius,this.outRadius,256,1,s.radians(0),s.radians(-.1)),r=new g.MeshBasicMaterial({color:n,side:g.DoubleSide}),(c=new g.Mesh(h,r)).renderOrder=1,c.position.y=this.fixCy(),this.scene.add(c),this.addDestroy(c),o={arc:c,pathData:[],itemData:e,line:u,mline:a,realIndex:t},this.path.push(o)}return this}},{key:"animationLine",value:function(){var t=this;if(!(this.lineLengthCount>=this.lineLength)){this.lineLengthCount=this.lineLength,this.lineLengthCount+=this.lineLengthStep,(this.lineLengthCount>=this.lineLength||!this.isAnimation())&&(this.lineLengthCount=this.lineLength);for(var e=0;e<this.path.length;e++){var i=this.path[e],n=this.arcLayer,o=i.itemData.lineEnd,a=i.itemData.lineExpend,s=this.line[e],r=new d.MeshLine,h=new g.Geometry;h.vertices.push(new g.Vector3(i.itemData.lineStart.x,i.itemData.lineStart.y,0),new g.Vector3(o.x,o.y,0),new g.Vector3(a.x,a.y,0)),r.setGeometry(h),s.geometry=r.geometry,this.lineLengthCount>=this.lineLength?(this.addIcon(i,n,i.realIndex),this.addText(i,n,i.realIndex)):window.requestAnimationFrame(function(){t.animationLine()})}}}},{key:"addIcon",value:function(t,e,i){if(!t.lineicon){var n=new g.CircleGeometry(3,32),o=new g.MeshBasicMaterial({color:16777215}),a=new g.Mesh(n,o);t.lineicon=a,this.scene.add(a),this.addDestroy(a)}t.lineicon.position.x=t.itemData.lineExpend.x,t.lineicon.position.y=t.itemData.lineExpend.y+this.fixCy()}},{key:"addText",value:function(t,e,i){t.text||(t.text=this.textar[i],this.scene.add(t.text),this.addDestroy(t.text));var n=t.text,o=t.itemData.textPoint,a=t.itemData.pointDirection.autoAngle(),s=(o=l.default.clone(t.itemData.lineEnd)).x,h=o.y+this.fixCy();t.itemData.pointDirection.auto();switch(n.position.x=s,n.position.y=h,(new g.Vector3).setFromMatrixPosition(n.matrixWorld),n.position.y=h+n.scale.y/2-r.to3d(3),a){case 8:case 1:n.position.x=s-n.scale.x/2+2;break;default:n.position.x=s+n.scale.x/2-2}}},{key:"calcLayoutPosition",value:function(){return this.inRadius=r.to3d(Math.ceil(this.inPercent*this.min/2)),this.outRadius=r.to3d(Math.ceil(this.outPercent*this.min/2)),this.lineHeight=r.to3d(24),this.lineWidth=r.to3d(50),this.lineLength=r.to3d(22),this}},{key:"destroy",value:function(){this.clearItems(),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"clearItems",value:function(){var t=this;this.clearList.map(function(e,i){t.dispose(e)}),this.clearList=[]}},{key:"initText",value:function(){var t=this;this.textar=[],this.realLineWidth=this.lineWidth,this.data.data.map(function(e,i){var n=r.to3d(25),o=new c.default({text:e.percent+"%",fontFamily:"MicrosoftYaHei",fontSize:2*n,fontStyle:"italic"}),a=new g.SpriteMaterial({map:o,color:t.lineColor}),s=new g.Sprite(a);s.scale.setX(o.imageAspect).multiplyScalar(n),t.clearList.push(s),t.textar.push(s)})}},{key:"calcVal",value:function(){var t=this;if(this.data){var e=0,i=0;if(this.data.data.map(function(t){e+=t.value}),this.total=e,this.data.data.map(function(n){n._percent=u.parseFinance(n.value/e,8),i=u.parseFinance(i+n._percent),n._totalPercent=i,n.percent=parseInt(100*n._percent*t.getPrecision(n))/t.getPrecision(n),n.endAngle=t.totalAngle*n._totalPercent}),this.data.data.length){var n=this.data.data[this.data.data.length-1];i-=n._percent,n._percent=1-i,n.percent=parseInt(100*n._percent*this.getPrecision(n))/this.getPrecision(n),n._totalPercent=1,n.endAngle=this.totalAngle}}}},{key:"calcDataPosition",value:function(){var t=this;this.data&&(this.lineRange={1:[],2:[],4:[],8:[]},this.data.data.map(function(e,i){e.startAngle=i?t.data.data[i-1].endAngle:0;var n=t.textar[i],o=t.lineWidth;n.scale.x>=o&&(o=n.scale.x),e.midAngle=e.startAngle+(e.endAngle-e.startAngle)/2,e.lineStart=s.distanceAngleToPoint(t.outRadius-2,e.midAngle),e.lineEnd=s.distanceAngleToPoint(t.outRadius+t.lineLength,e.midAngle),e.textPoint=s.distanceAngleToPoint(t.outRadius+t.lineLength,e.midAngle),e.pointDirection=new h.default(t.fixWidth(),t.fixHeight(),s.pointPlus(e.textPoint,t.cpoint));var a=e.pointDirection.autoAngle();switch(e.lineExpend=l.default.clone(e.lineEnd),a){case 1:case 8:if(e.lineEnd.x=-(t.outRadius+t.lineSpace),s.pointDistance(e.lineStart,e.lineEnd)>t.lineCurveLength){var r=s.pointAngle(e.lineStart,e.lineEnd),u=s.distanceAngleToPoint(t.lineCurveLength,r);u=s.pointPlus(u,e.lineStart),e.lineEnd.x=u.x}e.lineExpend.x=e.lineEnd.x-o;break;default:if(e.lineEnd.x=t.outRadius+t.lineSpace,s.pointDistance(e.lineStart,e.lineEnd)>t.lineCurveLength){var c=s.pointAngle(e.lineStart,e.lineEnd),d=s.distanceAngleToPoint(t.lineCurveLength,c);d=s.pointPlus(d,e.lineStart),e.lineEnd.x=d.x}e.lineExpend.x=e.lineEnd.x+o}t.lineRange[a].push(e)}),this.loopSort.map(function(e){var i=t.lineRange[e];if(i&&i.length&&i.length>1){for(var n=1;n<i.length;n++){var o=i[n-1],a=i[n];if(Math.abs(a.lineEnd.y-o.lineEnd.y)<t.lineHeight){1;break}}switch(e){case 4:for(var s=0,r=i.length-2;r>=0;r--){var h=i[r+1],l=i[r];(Math.abs(h.lineEnd.y-l.lineEnd.y)<t.lineHeight||l.lineEnd.y<=h.lineEnd.y)&&(s=h.lineEnd.y+t.lineHeight,l.lineEnd.y=s,l.lineExpend.y=s)}break;case 1:for(var u=i[0].lineEnd.y,c=i.length-2;c>=0;c--){var d=i[c+1],f=i[c];(Math.abs(d.lineEnd.y-f.lineEnd.y)<t.lineHeight||f.lineEnd.y>=d.lineEnd.y)&&(u=d.lineEnd.y-t.lineHeight,f.lineEnd.y=u,f.lineExpend.y=u)}break;case 2:for(var p=i[0].lineEnd.y,y=1;y<i.length;y++){var g=i[y-1],v=i[y];i[0];Math.abs(g.lineEnd.y+t.fixCy())<t.lineHeight&&(g.lineExpend.y=g.lineEnd.y=g.lineExpend.y+t.lineHeight),(Math.abs(g.lineEnd.y-v.lineEnd.y)<t.lineHeight||v.lineEnd.y>=g.lineEnd.y)&&(p=g.lineEnd.y-t.lineHeight,v.lineEnd.y=p,v.lineExpend.y=p)}break;case 8:for(var m=0,x=1;x<i.length;x++){var b=i[x-1],w=i[x];(Math.abs(b.lineEnd.y-w.lineEnd.y)<t.lineHeight||w.lineEnd.y<=b.lineEnd.y)&&(m=b.lineEnd.y+t.lineHeight,w.lineEnd.y=m,w.lineExpend.y=w.lineEnd.y)}}}}))}}]),e}();e.default=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false,n.configurable=true,"value"in n&&(n.writable=true),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},a=l(i(3)),s=h(i(2)),r=l(i(8));l(i(1)),h(i(5));function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,n,o));return a.name="Gauge"+Date.now(),a._setSize(i,n),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),n(e,[{key:"_setSize",value:function(t,i){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_setSize",this).call(this,t,i),this.totalPostfix="次/时",this.offsetCy=15,this.cy+=this.offsetCy,this.curRate=0,this.totalNum=0,this.totalNumStep=5,this.animationStep=40,this.roundRadiusPercent=.085,this.lineColor="#596ea7",this.circleLinePercent=.26,this.circlePercent=.28,this.circleLineRotation=0,this.circleLineRotationStep=4,this.arcLinePercent=.195,this.arcOutPercent=.19,this.arcInPercent=.1525,this.arcLabelLength=6,this.arcTextLength=20,this.arcAngle=280,this.part=22,this.arcTotal=1100,this.textOffset=0,this.arcOffset=90+(360-this.arcAngle)/2,this.arcOffsetPad=-5,this.partLabel=this.part/2,this.partAngle=this.arcAngle/this.part,this.partNum=this.arcTotal/this.part,this.textOffsetX=-1,this.textOffsetY=-8,this.textLineLength=6,this.textRectWidthPercent=.5,this.textRectHeightPercent=.11,this.textRoundPercent=.38,this.textRoundOffsetAngle=160,this.textRoundPlusAngle=110,this.textRoundMaxAngle=this.textRoundOffsetAngle+2*this.textRoundPlusAngle,this.roundStatusRaidus=30,this.textRoundAngle=[{angle:this.textRoundOffsetAngle,text:"低",point:{},min:0,max:100,radius:this.roundStatusRaidus,lineColor:this.lineColor},{angle:this.textRoundOffsetAngle+this.textRoundPlusAngle,text:"中",point:{},min:101,max:500,radius:this.roundStatusRaidus,lineColor:this.lineColor},{angle:this.textRoundOffsetAngle+2*this.textRoundPlusAngle,text:"高",point:{},min:501,max:Math.pow(10,10),radius:this.roundStatusRaidus,lineColor:this.lineColor}],this.init()}},{key:"getAttackRateAngle",value:function(){return this.arcOffset+this.arcAngle*this.getAttackRatePercent()}},{key:"getAttackRatePercent",value:function(){var t=0,e=void 0;return this.curRate&&((e=this.curRate)>this.arcTotal&&(e=this.arcTotal),t=e/this.arcTotal),t}},{key:"getAttackText",value:function(){var t=this,e="低";return this.curRate&&this.textRoundAngle.map(function(i){t.curRate>=i.min&&t.curRate<=i.max&&(e=i.text)}),e+"频\n攻击"}},{key:"init",value:function(){var t=this;this.textRoundRadius=this.width*this.textRoundPercent*this.sizeRate,this.roundRadius=this.width*this.roundRadiusPercent*this.sizeRate,this.arcInRadius=this.width*this.arcInPercent*this.sizeRate,this.arcOutRadius=this.width*this.arcOutPercent*this.sizeRate,this.arcLineRaidus=Math.ceil(this.arcLinePercent*this.max)*this.sizeRate,this.textWidth=this.textRectWidthPercent*this.width,this.textHeight=38*this.sizeRate,this.textX=this.cx-this.textWidth/2,this.textY=this.cy+this.arcLineRaidus+this.arcTextLength/2+2,this.textRoundAngle.map(function(e,i){var n=s.distanceAngleToPoint(t.textRoundRadius,e.angle);e.point=s.pointPlus(n,t.cpoint),e.point.y+=t.offsetCy}),this.arcPartLineAr=[],this.arcOutlinePartAr=[],this.textAr=[];for(var e=0;e<=this.part;e++){var i,n=void 0,o=void 0;if(i=e*this.partAngle+this.arcOffset,e&&e<this.part&&(n=s.distanceAngleToPoint(this.arcInRadius,i),o=s.distanceAngleToPoint(this.arcOutRadius,i),this.arcPartLineAr.push("M"),this.arcPartLineAr.push([n.x,n.y].join(",")),this.arcPartLineAr.push("L"),this.arcPartLineAr.push([o.x,o.y].join(","))),n=s.distanceAngleToPoint(this.arcLineRaidus,i),o=s.distanceAngleToPoint(this.arcLineRaidus+this.arcLabelLength,i),this.arcOutlinePartAr.push("M"),this.arcOutlinePartAr.push([n.x,n.y].join(",")),this.arcOutlinePartAr.push("L"),this.arcOutlinePartAr.push([o.x,o.y].join(",")),!(e*this.partNum%100)||0===e){var a=8,h=0;0===e&&(a=1),e>=19&&(a=14,h=9),e>=21&&(a=18);var l={text:e*this.partNum,angle:i-a,point:s.distanceAngleToPoint(this.arcLineRaidus+this.arcTextLength+0,i-a),rotationOffset:h};l.textPoint=new r.default(this.width,this.height,s.pointPlus(l.point,this.cpoint)),this.textAr.push(l)}}}},{key:"initRoundText",value:function(){this.textRoundAngle.map(function(t){})}},{key:"update",value:function(t,i){var n=this;this.stage.removeChildren(),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t,i),t&&t.data&&t.data.length&&t.data.map(function(t){n.curRate=t.value,n.totalNum=t.total}),this.initDataLayout(),this.angle=this.arcOffset+this.arcOffsetPad,this.animationAngle=this.getAttackRateAngle()+this.arcOffsetPad,this.updateWedge(),this.curRate&&(this.rateStep=Math.floor(this.curRate/(2*this.animationStep)),!this.inited&&this.animation()),this.totalNum&&(this.totalNumStep=Math.floor(this.totalNum/this.animationStep),this.totalNumStep<1&&(this.totalNumStep=1),this.totalNumCount=0,this.animationText()),!this.inited&&this.animationCircleLine(),this.inited=1}},{key:"animationCircleLine",value:function(){var t=this;this.isDestroy||this.circleLine&&this.isAnimation()&&(this.circleLineRotation+=this.circleLineRotationStep,this.circleLine.rotation(this.circleLineRotation),this.stage.add(this.layoutLayer),window.requestAnimationFrame(function(){t.animationCircleLine()}))}},{key:"animationText",value:function(){var t=this;this.isDestroy||this.totalNumCount>=this.totalNum||(this.totalNumCount+=this.totalNumStep,(this.totalNumCount>=this.totalNum||!this.isAnimation())&&(this.totalNumCount=this.totalNum),this.totalText.text(this.totalNumCount),this.totalTextPostfix.x(this.totalText.textWidth+5),this.totalTextGroup.x((this.width-this.totalTextPostfix.textWidth-this.totalText.textWidth-5)/2),this.layoutLayer.add(this.totalTextGroup),window.requestAnimationFrame(function(){t.animationText()}))}},{key:"drawText",value:function(){}},{key:"drawTextRect",value:function(){var t=this.tmpTotalText.textWidth+30+this.totalTextPostfix.textWidth+5;t<170&&(t=170),this.cx,this.textY,this.textHeight,this.totalText.textHeight}},{key:"drawArcText",value:function(){this.textAr&&this.textAr.length&&this.textAr.map(function(t){})}},{key:"drawArcLine",value:function(){var t=[];t.push("M");for(var e=this.arcOffset;e<=this.arcOffset+this.arcAngle;e+=.5){var i=s.distanceAngleToPoint(this.arcLineRaidus,e);t.push([i.x,i.y].join(",")+","),90==e&&t.push("L")}}},{key:"drawArc",value:function(){this.cx,this.cy,this.arcInRadius,this.arcOutRadius,this.arcAngle,this.arcOffset}},{key:"initDataLayout",value:function(){this.inited}},{key:"animation",value:function(){var t=this;this.isDestroy||this.angle>this.animationAngle||(this.angle+=this.rateStep,(this.angle>=this.animationAngle||!this.isAnimation())&&(this.angle=this.animationAngle),this.updateWedge(),this.stage.add(this.layer),window.requestAnimationFrame(function(){t.animation()}))}},{key:"updateWedge",value:function(){var t=s.distanceAngleToPoint(this.roundRadius+6,this.angle);this.group.x(this.cx+t.x),this.group.y(this.cy+t.y),this.group.rotation(this.angle+90),this.group.rotation(this.angle+90),this.stage.add(this.layer)}},{key:"calcDataPosition",value:function(){}},{key:"animationLine",value:function(){}},{key:"addIcon",value:function(t,e){}},{key:"addText",value:function(t,e){}},{key:"calcLayoutPosition",value:function(){}},{key:"drawCircle",value:function(){this.circleRadius=Math.ceil(this.circlePercent*this.max/2)*this.sizeRate}},{key:"drawCircleLine",value:function(){this.circleLineRadius=Math.ceil(this.circleLinePercent*this.max/2)*this.sizeRate;var t=[];t.push("M");for(var e=90;e<=180;e++){var i=s.distanceAngleToPoint(this.circleLineRadius,e+90);t.push([i.x,i.y].join(",")+","),90==e&&t.push("L")}t.push("M");for(var n=270;n<=360;n++){var o=s.distanceAngleToPoint(this.circleLineRadius,n+90);t.push([o.x,o.y].join(",")+","),270==n&&t.push("L")}}},{key:"reset",value:function(){}},{key:"destroy",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.textRoundAngle.map(function(t){t.ins&&t.ins.destroy()})}}]),e}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.CHART_TYPE={dount:"dount",gauge:"gauge"}},function(t,e,i){"use strict";var n=n||{};n.DomEvents=function(t,e){this._camera=t||null,this._domElement=e||document,this._raycaster=new THREE.Raycaster,this._selected=null,this._boundObjs={};var i=this;this._$onClick=function(){i._onClick.apply(i,arguments)},this._$onDblClick=function(){i._onDblClick.apply(i,arguments)},this._$onMouseMove=function(){i._onMouseMove.apply(i,arguments)},this._$onMouseDown=function(){i._onMouseDown.apply(i,arguments)},this._$onMouseUp=function(){i._onMouseUp.apply(i,arguments)},this._$onTouchMove=function(){i._onTouchMove.apply(i,arguments)},this._$onTouchStart=function(){i._onTouchStart.apply(i,arguments)},this._$onTouchEnd=function(){i._onTouchEnd.apply(i,arguments)},this._$onContextmenu=function(){i._onContextmenu.apply(i,arguments)},this._domElement.addEventListener("click",this._$onClick,false),this._domElement.addEventListener("dblclick",this._$onDblClick,false),this._domElement.addEventListener("mousemove",this._$onMouseMove,false),this._domElement.addEventListener("mousedown",this._$onMouseDown,false),this._domElement.addEventListener("mouseup",this._$onMouseUp,false),this._domElement.addEventListener("touchmove",this._$onTouchMove,false),this._domElement.addEventListener("touchstart",this._$onTouchStart,false),this._domElement.addEventListener("touchend",this._$onTouchEnd,false),this._domElement.addEventListener("contextmenu",this._$onContextmenu,false)},n.DomEvents.prototype.destroy=function(){this._domElement.removeEventListener("click",this._$onClick,false),this._domElement.removeEventListener("dblclick",this._$onDblClick,false),this._domElement.removeEventListener("mousemove",this._$onMouseMove,false),this._domElement.removeEventListener("mousedown",this._$onMouseDown,false),this._domElement.removeEventListener("mouseup",this._$onMouseUp,false),this._domElement.removeEventListener("touchmove",this._$onTouchMove,false),this._domElement.removeEventListener("touchstart",this._$onTouchStart,false),this._domElement.removeEventListener("touchend",this._$onTouchEnd,false),this._domElement.removeEventListener("contextmenu",this._$onContextmenu,false)},n.DomEvents.eventNames=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu","touchstart","touchend"],n.DomEvents.prototype._getRelativeMouseXY=function(t){var e=t.target||t.srcElement;3===e.nodeType&&(e=e.parentNode);var i={x:0,y:0},n=e,o=getComputedStyle(n,null);i.y+=parseInt(o.getPropertyValue("padding-top"),10),i.x+=parseInt(o.getPropertyValue("padding-left"),10);do{i.x+=n.offsetLeft,i.y+=n.offsetTop,o=getComputedStyle(n,null),i.x+=parseInt(o.getPropertyValue("border-left-width"),10),i.y+=parseInt(o.getPropertyValue("border-top-width"),10)}while(n=n.offsetParent);var a=e===window?window.innerWidth:e.offsetWidth,s=e===window?window.innerHeight:e.offsetHeight;return{x:+(t.pageX-i.x)/a*2-1,y:-(t.pageY-i.y)/s*2+1}},n.DomEvents.prototype._objectCtxInit=function(t){t._3xDomEvent={}},n.DomEvents.prototype._objectCtxDeinit=function(t){delete t._3xDomEvent},n.DomEvents.prototype._objectCtxIsInit=function(t){return!!t._3xDomEvent},n.DomEvents.prototype._objectCtxGet=function(t){return t._3xDomEvent},n.DomEvents.prototype.camera=function(t){return t&&(this._camera=t),this._camera},n.DomEvents.prototype.bind=function(t,e,i,n){this._objectCtxIsInit(t)||this._objectCtxInit(t);var o=this._objectCtxGet(t);o[e+"Handlers"]||(o[e+"Handlers"]=[]),o[e+"Handlers"].push({callback:i,useCapture:n}),void 0===this._boundObjs[e]&&(this._boundObjs[e]=[]),this._boundObjs[e].push(t)},n.DomEvents.prototype.addEventListener=n.DomEvents.prototype.bind,n.DomEvents.prototype.unbind=function(t,e,i,n){this._objectCtxIsInit(t)||this._objectCtxInit(t);var o=this._objectCtxGet(t);o[e+"Handlers"]||(o[e+"Handlers"]=[]);for(var a=o[e+"Handlers"],s=0;s<a.length;s++){var r=a[s];if(i==r.callback&&n==r.useCapture){a.splice(s,1);break}}var h=this._boundObjs[e].indexOf(t);this._boundObjs[e].splice(h,1)},n.DomEvents.prototype.removeEventListener=n.DomEvents.prototype.unbind,n.DomEvents.prototype._bound=function(t,e){var i=this._objectCtxGet(e);return!!i&&!!i[t+"Handlers"]},n.DomEvents.prototype._onMove=function(t,e,i,n){var o=this._boundObjs[t];if(void 0!==o&&0!==o.length){var a=new THREE.Vector2;a.set(e,i),this._raycaster.setFromCamera(a,this._camera);var s=this._raycaster.intersectObjects(o),r=this._selected;if(s.length>0){var h,l,u,c=s[0],d=c.object;this._selected=d,u=this._bound("mousemove",d),r!=d&&(h=this._bound("mouseover",d),l=r&&this._bound("mouseout",r))}else l=r&&this._bound("mouseout",r),this._selected=null;u&&this._notify("mousemove",d,n,c),h&&this._notify("mouseover",d,n,c),l&&this._notify("mouseout",r,n,c)}},n.DomEvents.prototype._onEvent=function(t,e,i,n){var o=this._boundObjs[t];if(void 0!==o&&0!==o.length){var a=new THREE.Vector2;a.set(e,i),this._raycaster.setFromCamera(a,this._camera);var s=this._raycaster.intersectObjects(o,true);if(0!==s.length){for(var r=s[0],h=r.object,l=this._objectCtxGet(h),u=h.parent;void 0===l&&u;)l=this._objectCtxGet(u),u=u.parent;l&&this._notify(t,h,n,r)}}},n.DomEvents.prototype._notify=function(t,e,i,n){var o=this._objectCtxGet(e),a=o?o[t+"Handlers"]:null;if(o&&a&&0!==a.length){a=o[t+"Handlers"];for(var s=0;s<a.length;s++){var r=a[s],h=true;r.callback({type:t,target:e,origDomEvent:i,intersect:n,stopPropagation:function(){h=false}}),h&&(false===r.useCapture&&e.parent&&this._notify(t,e.parent,i,n))}}else e.parent&&this._notify(t,e.parent,i,n)},n.DomEvents.prototype._onMouseDown=function(t){return this._onMouseEvent("mousedown",t)},n.DomEvents.prototype._onMouseUp=function(t){return this._onMouseEvent("mouseup",t)},n.DomEvents.prototype._onMouseEvent=function(t,e){var i=this._getRelativeMouseXY(e);this._onEvent(t,i.x,i.y,e)},n.DomEvents.prototype._onMouseMove=function(t){var e=this._getRelativeMouseXY(t);this._onMove("mousemove",e.x,e.y,t),this._onMove("mouseover",e.x,e.y,t),this._onMove("mouseout",e.x,e.y,t)},n.DomEvents.prototype._onClick=function(t){this._onMouseEvent("click",t)},n.DomEvents.prototype._onDblClick=function(t){this._onMouseEvent("dblclick",t)},n.DomEvents.prototype._onContextmenu=function(t){this._onMouseEvent("contextmenu",t)},n.DomEvents.prototype._onTouchStart=function(t){return this._onTouchEvent("touchstart",t)},n.DomEvents.prototype._onTouchEnd=function(t){return this._onTouchEvent("touchend",t)},n.DomEvents.prototype._onTouchMove=function(t){if(1==t.touches.length){t.preventDefault();var e=+t.touches[0].pageX/window.innerWidth*2-1,i=-t.touches[0].pageY/window.innerHeight*2+1;this._onMove("mousemove",e,i,t),this._onMove("mouseover",e,i,t),this._onMove("mouseout",e,i,t)}},n.DomEvents.prototype._onTouchEvent=function(t,e){if(1==e.touches.length){e.preventDefault();var i=+e.touches[0].pageX/window.innerWidth*2-1,n=-e.touches[0].pageY/window.innerHeight*2+1;this._onEvent(t,i,n,e)}},t.exports=n},function(t){t.exports={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},precision:2,legend:{orient:"vertical",bottom:"16px",right:"8%",itemWidth:4,itemHeight:12,borderRadius:4,column:3,data:[{name:"DNS访问",textStyle:{color:"#1987fa",fontWeight:"150"}},{name:"读",textStyle:{color:"#1987fa",fontWeight:"150"}},{name:"TCP外连接",textStyle:{color:"#1987fa",fontWeight:"150"}},{name:"写",textStyle:{color:"#1987fa",fontWeight:"150"}},{name:"删除",textStyle:{color:"#1987fa",fontWeight:"150"}},{name:"其他",textStyle:{color:"#1987fa",fontWeight:"150"}}]},series:[{name:"安全事件类型分布",type:"dount",radius:["35%","60%"],center:["30%","50%"],legendHoverLink:false,hoverAnimation:false,avoidLabelOverlap:false,startAngle:0,minAngle:10,labelLine:{show:true},label:{show:true,fontSize:16,position:"outside",formatter:"{d}%"},data:[{name:"DNS访问",value:2e4,itemStyle:{color:"#f12575"}},{name:"读",value:51611,itemStyle:{color:"#da432e"}},{name:"TCP外连接",value:15148,itemStyle:{color:"#f3a42d"}},{name:"写",value:10576,itemStyle:{color:"#19af89"}},{name:"删除",value:9018,itemStyle:{color:"#24a3ea"}},{name:"其他",value:389658,itemStyle:{color:"#b56be8"}}],background:[{url:"./img/dount-in.png",width:120,height:120,offsetX:0,offsetY:1},{url:"./img/dount-big.png",width:250,height:248,offsetX:0,offsetY:1}],z:1}]}},,,,,,,,,function(t,e,i){"use strict";i.r(e);var n=i(9),o=i.n(n),a=i(11),s=i.n(a),r=i(6),h=(i(30),i(12));let l=[{url:base64img.svgRateOut,isbase64:true,base64prefix:"data:image/png;base64,",width:120,height:120,offsetX:0,offsetY:1,rotation:1,rotationAttr:"z",scaleOffset:0}];new s.a("HuXiaoBoKuHei").load().then(function(){let t={position:{x:0,y:0,z:0}},e={position:{x:0,y:0,z:0}},n=new h.a,a=n.addFolder("scene position");a.add(t.position,"x"),a.add(t.position,"y"),a.add(t.position,"z");let s=n.addFolder("camera position");s.add(e.position,"x"),s.add(e.position,"y"),s.add(e.position,"z");let u=i(20);u&&u.series&&u.series.map(t=>{t.background=l}),r.a(u);let c=document.querySelector("#twoBox"),d=new o.a(c);d.updateThreeConfig({camera:{fov:40},cameraPosition:{}}),d.update(u,true),window.addEventListener("resize",()=>{window.tmpTimeout&&clearTimeout(window.tmpTimeout),window.tmpTimeout=setTimeout(()=>{let t=.6*Math.min(window.innerHeight,window.innerWidth);d.resize(t,t)},1e3)})},function(){})},function(t,e){t.exports='<?xml version="1.0" encoding="UTF-8" ?>\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg width="198pt" height="196pt" viewBox="0 0 198 196" version="1.1" xmlns="http://www.w3.org/2000/svg">\r\n<g id="#11162133">\r\n<path fill="#111621" opacity="0.20" d=" M 97.91 0.00 L 109.13 0.00 C 113.17 0.93 117.22 1.80 121.29 2.59 C 148.15 8.63 171.90 26.83 185.00 51.02 C 196.31 71.48 199.78 96.10 194.74 118.91 C 187.93 151.58 163.07 179.54 131.58 190.47 C 124.36 193.20 116.68 194.16 109.22 196.00 L 88.81 196.00 C 84.54 194.98 80.24 194.14 75.94 193.25 C 53.43 187.91 33.05 174.17 19.57 155.38 C 7.53 138.84 1.02 118.46 0.96 98.02 C 1.45 98.03 2.43 98.03 2.91 98.03 C 3.01 117.05 8.83 135.88 19.35 151.71 C 21.19 148.89 24.14 147.25 27.11 145.83 C 34.34 156.00 43.12 165.23 53.91 171.65 C 52.72 174.07 51.42 176.44 50.02 178.75 C 48.85 178.55 47.68 178.36 46.51 178.17 C 49.70 180.41 53.10 182.36 56.63 184.02 C 57.95 181.26 59.38 178.56 60.92 175.93 C 72.21 181.32 84.52 184.31 97.00 185.07 C 96.99 187.75 96.98 190.42 96.97 193.10 C 90.25 192.70 83.55 191.84 76.97 190.41 C 71.72 189.28 66.80 187.06 61.55 185.94 C 66.63 188.90 72.38 190.35 78.06 191.66 C 91.48 194.67 105.56 194.84 119.00 191.87 C 125.01 190.48 131.16 189.10 136.52 185.89 C 126.19 188.90 115.87 192.52 104.96 192.57 C 104.99 190.04 105.02 187.51 105.05 184.98 C 117.45 184.01 129.56 180.60 140.74 175.16 C 142.02 177.57 143.28 179.98 144.52 182.41 C 147.27 180.91 149.96 179.34 152.62 177.71 C 150.37 175.95 148.74 173.62 147.53 171.06 C 157.67 164.03 166.62 155.30 173.37 144.93 C 175.84 146.13 178.11 147.70 179.78 149.91 C 181.35 147.24 182.92 144.58 184.45 141.89 C 182.13 140.61 179.81 139.32 177.49 138.03 C 182.77 126.91 186.18 114.96 187.00 102.66 C 189.32 102.71 191.63 102.74 193.95 102.74 C 193.46 108.55 192.80 114.36 191.41 120.02 C 190.21 125.26 188.02 130.21 186.96 135.49 C 189.83 130.36 191.34 124.63 192.68 118.94 C 195.77 105.19 195.74 90.78 192.66 77.03 C 191.32 71.36 189.95 65.58 186.91 60.54 C 187.97 65.46 189.98 70.10 191.17 74.98 C 192.77 81.42 193.67 88.02 193.91 94.65 C 191.67 94.65 189.42 94.65 187.17 94.65 C 186.22 82.28 183.34 70.07 177.82 58.91 C 180.07 57.54 182.33 56.20 184.62 54.90 C 183.11 51.78 181.41 48.76 179.66 45.78 C 179.39 49.04 176.46 50.42 173.94 51.79 C 167.87 43.16 161.07 34.82 152.38 28.69 C 150.98 27.52 149.16 26.63 148.28 24.99 C 149.00 22.38 151.00 20.42 152.65 18.35 C 150.09 16.75 147.48 15.21 144.83 13.76 C 143.65 16.25 142.40 18.71 141.07 21.12 C 129.84 15.43 117.54 12.01 104.99 11.01 C 105.01 8.40 105.02 5.79 105.04 3.18 C 110.41 3.75 115.79 4.39 121.05 5.62 C 126.32 6.77 131.27 9.04 136.56 10.07 C 128.02 5.61 118.38 3.68 108.88 2.52 C 105.20 1.91 100.70 3.13 97.91 0.00 M 153.57 19.63 C 157.32 23.08 161.04 26.67 165.36 29.40 C 162.21 25.35 158.24 21.82 153.57 19.63 M 169.56 33.72 C 171.81 37.24 174.33 40.63 177.41 43.48 C 175.60 39.67 173.01 36.18 169.56 33.72 M 20.64 152.67 C 22.43 156.42 25.06 159.74 28.33 162.31 C 26.24 158.75 23.67 155.47 20.64 152.67 M 168.62 163.36 C 172.34 160.53 175.35 156.80 177.38 152.59 C 174.06 155.82 171.15 159.49 168.62 163.36 M 153.61 176.32 C 158.25 174.11 162.27 170.62 165.40 166.56 C 161.09 169.30 157.38 172.90 153.61 176.32 M 34.77 168.57 C 37.23 171.98 40.61 174.64 44.43 176.37 C 41.55 173.37 38.27 170.80 34.77 168.57 Z" />\r\n<path fill="#111621" opacity="0.20" d=" M 57.07 13.11 C 69.12 6.20 83.26 3.66 97.01 3.01 C 97.01 5.66 97.00 8.31 96.98 10.95 C 85.82 11.70 74.62 13.88 64.43 18.65 C 63.11 19.06 61.78 20.11 60.35 19.78 C 58.99 17.79 57.02 15.57 57.07 13.11 Z" />\r\n<path fill="#111621" opacity="0.20" d=" M 83.96 13.61 C 89.36 12.79 94.91 11.54 100.37 12.38 C 100.58 12.70 100.98 13.35 101.19 13.67 C 88.49 14.33 75.69 16.51 64.22 22.24 C 43.28 32.06 26.84 50.94 19.97 73.02 C 17.04 81.47 16.38 90.41 15.63 99.25 C 13.85 98.53 14.07 96.50 14.07 94.93 C 14.78 77.74 20.68 60.76 31.03 46.99 C 43.67 29.78 62.98 17.58 83.96 13.61 Z" />\r\n<path fill="#111621" opacity="0.20" d=" M 19.20 46.62 C 26.83 34.67 37.15 24.24 49.48 17.15 C 50.81 19.53 52.13 21.91 53.46 24.28 C 49.31 27.52 44.89 30.42 41.01 33.99 C 35.46 38.91 31.05 44.92 26.77 50.92 C 24.20 49.57 21.68 48.14 19.20 46.62 Z" />\r\n<path fill="#111621" opacity="0.20" d=" M 15.02 53.74 C 17.65 54.93 20.18 56.33 22.56 57.97 C 16.87 69.41 13.74 81.93 12.84 94.65 C 9.94 94.65 7.05 94.65 4.16 94.65 C 4.47 80.42 8.29 66.28 15.02 53.74 Z" />\r\n<path fill="#111621" opacity="0.20" d=" M 4.04 102.85 C 7.03 102.57 10.04 102.52 13.04 102.78 C 13.83 115.35 17.39 127.60 23.00 138.86 C 20.54 140.45 17.96 141.85 15.31 143.10 C 8.70 130.69 4.96 116.87 4.04 102.85 Z" />\r\n</g>\r\n</svg>\r\n'}],[[29,1,0]]]);
//# sourceMappingURL=gauge.js.map